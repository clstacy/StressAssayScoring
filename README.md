# Stress Assay Tools: Image Dicer & Scorer

Welcome to the **Stress Assay Tools**, an interactive, browser-based suite designed for scientific research involving the processing and scoring of stress assay plate images (e.g., yeast growth assays). This application allows users to:

1.  **Dice** large plate images into individual well images using the **Image Grid Dicer**.
2.  **Upload** these individual well images (potentially from multiple plates/experiments organized in folders) to the **Stress Assay Scorer**.
3.  **Assign scores** based on default or custom criteria, utilizing features for blinded scoring.
4.  **Review** results and quality control metrics, including inter-replicate reliability (Cohen's Kappa).
5.  **Export** comprehensive scoring data and reconstructed plate mosaics.

The entire application runs in your web browser, requiring no server-side processing or additional software installations. All data remains local to your machine.

**To use this tool now, visit:** [https://clstacy.github.io/StressAssayScoring/](https://clstacy.github.io/StressAssayScoring/)

---

## Table of Contents

- [Features](#features)
- [Workflow Overview](#workflow-overview)
- [Getting Started](#getting-started)
  - [Prerequisites](#prerequisites)
  - [Deployment](#deployment)
- [Usage Instructions](#usage-instructions)
  - [Part 1: Image Grid Dicer](#part-1-image-grid-dicer)
  - [Part 2: Stress Assay Scorer](#part-2-stress-assay-scorer)
- [Features Explanation](#features-explanation)
- [Technical Details](#technical-details)
- [Browser Compatibility](#browser-compatibility)
- [Privacy and Security](#privacy-and-security)
- [Contributing](#contributing)
- [License](#license)

---

## Features

* **Two-Tab Interface**: Separate tools for dicing plate images and scoring wells.
* **Image Grid Dicer**:
    * Processes large plate images into individual well images based on user-defined grid dimensions and labels.
    * Handles multiple plate images simultaneously.
    * Exports cropped wells organized by original plate image into a ZIP file.
    * Saves row/column label order for consistent mosaic generation later.
* **Stress Assay Scorer**:
    * Upload cropped well images via **folder selection** (recommended for multi-plate experiments).
    * Handles images from multiple plates/subfolders, preserving plate identity.
    * **Custom Scoring**: Define scoring criteria and labels.
    * **Blinded Scoring**:
        * Randomized image presentation order.
        * Optional random image rotation during scoring.
    * **Replication**: Include replicated images (user-defined factor) for consistency checks.
    * **Quality Control**:
        * Calculates Cohen's Weighted Kappa (Îº) for inter-replicate reliability.
        * Reports on replicate scoring consistency.
    * **Results Visualization**: Modal view showing scored images grouped by category and summary statistics.
    * **Comprehensive Data Export**: Downloads a single ZIP file containing:
        * `image_scores.csv`: Detailed scoring data including PlateID, FilePath, Row, Column, Score, Timestamp, etc.
        * `summary_statistics.txt`: QC report including Kappa results.
        * `plate_mosaics/` folder: Contains a reconstructed, unrotated mosaic image (`.png`) for *each* plate scored, with scores overlaid and informative row/column labels.

---

## Workflow Overview

1.  **(Optional but Recommended)** Crop original plate scan images to the area containing spots.
2.  Use the **Image Grid Dicer** tab to upload the cropped plate scans, define the grid layout (rows, columns) and corresponding labels, and download a ZIP file containing individual well images organized into folders.
3.  Switch to the **Stress Assay Scorer** tab.
4.  Upload the **folder(s)** containing the individual well images generated by the Dicer.
5.  Enter scorer name, optionally set custom scores or replication factor.
6.  Load images for scoring.
7.  Assign scores to the randomized and potentially rotated images, navigating pages if replicates exist.
8.  View results and QC metrics.
9.  Download the final ZIP archive containing the CSV data, summary report, and plate mosaics.

---

## Getting Started

### Prerequisites

- A modern web browser that supports the `webkitdirectory` attribute for folder uploads (e.g., Google Chrome, Mozilla Firefox, Microsoft Edge, Safari).
- No additional software installations are required.

### Deployment

The app is a static HTML file and can be run locally or hosted online (e.g., using GitHub Pages).

#### Running Locally

1.  Download or clone the repository.
2.  Open the `index.html` file directly in your web browser.

#### Hosting Online (GitHub Pages Example)

1.  Fork this repository.
2.  Go to your repository's settings > Pages.
3.  Select the source branch (e.g., `main`) and save.
4.  Access the app via the provided GitHub Pages URL (`https://<your-username>.github.io/<repository-name>/`).

---

## Usage Instructions

*(See the detailed [VIGNETTE.md](VIGNETTE.md) file for a step-by-step tutorial with examples).*

### Part 1: Image Grid Dicer

1.  Navigate to the **Image Grid Dicer** tab.
2.  Upload one or more (cropped) plate scan images.
3.  Define the number of **Rows** and **Columns**.
4.  Enter comma-separated **Row Labels** and **Column Labels** matching the grid dimensions. Underscores are recommended over spaces.
5.  Click **Process Images**.
6.  Click **Download Cropped Images ZIP**.
7.  Unzip the file and verify the contents (folders named after original plates, containing individual well images).

### Part 2: Stress Assay Scorer

1.  Navigate to the **Stress Assay Scorer** tab.
2.  Click **"1. Upload well images (folder recommended)"** and select the **folder(s)** containing the well images generated by the Dicer.
3.  Enter your **"2. Scorer name"**.
4.  (Optional) Set **"3. Custom scores"** and click **Set**.
5.  (Optional) Adjust the **"4. Replication factor"**.
6.  Click **"5. Load Images for Scoring"**.
7.  Use the **"6. Select score"** dropdown and click images in the main grid to assign scores.
8.  Use **Prev/Next Page** buttons if replicates exist (Factor > 1).
9.  Click **Finish & View Results** to see the summary modal (includes Kappa score).
10. Click **Download Scores & Mosaics** to get the final ZIP archive.

---

## Features Explanation

* **Multi-Plate Handling**: Uploading folders allows the scorer to distinguish images originating from different plates/experiments based on their subfolder path (`PlateID`). Mosaics are generated per-plate.
* **Blinding**: Image randomization and optional rotation help reduce bias during the manual scoring process.
* **Replication & Kappa**: Allows quantitative assessment of scoring consistency using Cohen's Weighted Kappa.
* **Mosaic Output**: Provides a visual overview of scores across each original plate layout, aiding in pattern recognition and verification. Scores are overlaid, and conflicting replicate scores are shown (e.g., "1/2").
* **Detailed CSV**: Includes `PlateID` and `FilePath` for robust data tracking and merging with other experimental metadata.

---

## Technical Details

- **Technologies Used**:
  - HTML, CSS, JavaScript.
  - [JSZip](https://stuk.github.io/jszip/) for ZIP file creation.
  - [FileSaver.js](https://github.com/eligrey/FileSaver.js/) for saving files in the browser.
- **Data Handling**: All processing is client-side. No data is uploaded.

---

## Browser Compatibility

- Compatible with modern browsers supporting `webkitdirectory` (Chrome, Firefox, Edge, Safari).
- JavaScript must be enabled.

---

## Privacy and Security

- **Data Privacy**: All operations occur locally in the browser. No data transmission occurs.
- **Security Considerations**: Use on a trusted device.

---

## Contributing

Contributions are welcome! Please follow standard GitHub fork/pull request procedures.

---

## License

This project is licensed under the Apache License. See the LICENSE file for details.

---

If you have questions or issues, please open an issue on the GitHub repository or contact <clstacy.stat@gmail.com>.
